pipeline{
    agent any
    environment{
        MONGO="mongodb+srv://vivektangudu:viv@cluster0.czt49fi.mongodb.net/udemy?retryWrites=true&w=majority"
        JWT="secret"
    stages{
        stage('Clone Git'){
            steps{
                git 'https://github.com/vivektangudu123/udem.git'
            }
        }
        stage('Testing'){
            steps{
                dir('client'){
                    sh "npm install"
                }
            }
        }
        stage('Build Frontend Image') {
            steps {
                sh 'docker build -t frontend-image .'
            }
        }
        stage('Build Backend Image') {
            steps {
                sh 'docker build -t backend-image ./api'
            }
        }
    }
}