pipeline{
    agent any
    environment{
        mongo_url = "mongodb+srv://vivektangudu:viv@cluster0.czt49fi.mongodb.net/"
        JWT_SECRET = "SECRETLEL"
    }
    stages{
        stage('Clone Git'){
            steps{
                git 'https://github.com/vivektangudu123/udem.git'
            }
        }
        stage('Testing'){
            steps{
                dir('api'){
                    sh "npm install"
                    sh "npm test"
                }
            }
        }
        stage('Build Frontend Image') {
            steps {
                sh 'docker build -t frontend-image .'
            }
        }
         stage('Build Backend Image') {
            steps {
                sh 'docker build -t backend-image ./api'
            }
        }
    }
}
